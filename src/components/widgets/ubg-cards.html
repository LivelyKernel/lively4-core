<template id="ubg-cards">
  <style data-src="/src/external/font-awesome/css/font-awesome.css"></style>
  <style data-src="/templates/livelystyle.css"></style>
  <style>
    :host, :host #layout {
      position: absolute;
      margin: 0;
      padding: 0;
      left: 0;
      top: 0;
      right: 0;
      bottom: 0;
    }

    :host(.over.accept-drop) {
      background-color: lightgreen;
/*       border: 2px green solid; */
    }
    :host(.over.reject-drop) {
      background-color: lightpink;
/*       border: 2px red solid; */
    }

    #content {
      background-color: lightgray;
      border: 1px solid gray;  
      
    }

    :host([src]) #content {
      background-color: lightblue;
      border: 1px solid blue;  
    }
    
    :host-context(lively-window) #content {
      background-color: transparent  !important;;
      border: none !important;
    }

    #saveButton {
      display: none;  
    }
    
    :host([src]) #saveButton {
      display: inline;  
    }

    #layout {
      display: grid;
      grid-template-columns: auto 400px;
      grid-template-rows: auto 1fr 3.5in;
      grid-template-areas:
        "header header"
        "main stats"
        "footer footer"
        ;
      column-gap: 2px;
      row-gap: 2px;

      margin: 0;
      padding: 0;
      bottom: 0px;
    }
    #buttons {
      grid-area: header;
      align-self: center;
      justify-self: top;
      white-space: nowrap;
      background: lightgray;
    }
    #footer {
      grid-area: footer;
    }
    #content {
      grid-area: main;
      align-self: left;
      white-space: nowrap;
      overflow-x: hidden;
      overflow-y: auto;
    }
    #stats {
      background-color: lightgray;
      grid-area: stats;
      
    }
    .textLayer {
      display: none;
    }
    #close-preview {
      position: absolute;
      top: 0;
      left: 0;
    }
    
    @keyframes tilt-shaking {
  0% { transform: rotate(0deg); }
  25% { transform: rotate(3deg); }
  50% { transform: rotate(0eg); }
  75% { transform: rotate(-3deg); }
  100% { transform: rotate(0deg); }
}
    :host([text-changed]) #saveJSON {
      animation: tilt-shaking 0.3s infinite;
      background: linear-gradient(orangered, coral);
    }
    
    .shortcut-supported {
      background: linear-gradient(limegreen, lightgreen);
    }
    .shortcut-supported:hover {
      background: linear-gradient(lightgreen, palegreen);
    }
    :host {
      --sort-background: linear-gradient(to bottom right, #ddd 0%, #ddd 50%, limegreen 50%, limegreen 100%);
    }
    :host([sort-descending]) {
      --sort-background: linear-gradient(to bottom left, #ddd 0%, #ddd 50%, limegreen 50%, limegreen 100%);
    }
    :host(:not([sortBy])) #sortById, :host([sortBy="id"]) #sortById, :host([sortBy="name"]) #sortByName {
      background: var(--sort-background);
    }

    input#rangeStart, input#rangeEnd {
      width: 4ex;
    }
        .line {
          fill: none;
          stroke-width: 2px;
          stroke: steelblue;
        }
        .deck1 {
            stroke: steelblue;
        }
        .deck2 {
            stroke: crimson;
        }
        .deck3 {
            stroke: darkgreen;
        }
        .legend {
            font-family: sans-serif;
            font-size: 10px;
        }
            .bubble {
            fill: steelblue;
            stroke: #000;
            stroke-width: 1px;
            opacity: 0.8;
        }
    .legend-bubble.bubble {
      fill: transparent;
    }
        .axis-label {
            font-size: 12px;
            text-anchor: middle;
        }
    
  </style>
  <div id='layout'>
    <div id="buttons">
      <input id="filter"  title="Ctrl+/" placeholder="filter: regex fire\b or > c.getId() > 1000"/>
      <button id="onlyGoodCards" title="adjust filter to only the best cards"><i class="fa fa-thumbs-o-up" aria-hidden="true"></i></button>
      <button id="onlyCardsToTest" title="adjust filter to only cards to test"><i class="fa fa-fire" aria-hidden="true"></i></button>
      <button id="onlyNewCards" title="adjust filter to only new cards"><i class="fa fa-plus-square-o" aria-hidden="true"></i></button>
      <button id="startCardScanner" title="start scanning playtested cards"><i class="fa fa-barcode" aria-hidden="true"></i></button>
      <button id="sortById" title="sort cards by id"><i class="fa fa-sort" aria-hidden="true"></i>by id</button>
      <button id="sortByName" title="sort cards by name"><i class="fa fa-sort" aria-hidden="true"></i>by name</button>
      <input id="rangeStart" title="min id" placeholder="min"/>
      <input id="rangeEnd" title="max id" placeholder="max"/>
      <button id="copyIDs" title="copy ids for next 100 cards"><i class="fa fa-upload"></i></button>
      <button id="import new cards" class="shortcut-supported" title="import new cards (Ctrl+I)">import <i class="fa fa-download"></i></button>
      <button id="generateArt" part='danger' title="generate the art using openai's api for dali"><i class="fa fa-paint-brush"></i></button>
      <button id="artDesc" title="copy to clipboard art descriptions of card that do not have art yet (for bulk generation)">art <i class="fa fa-clipboard"></i></button>
      <button id="printSelected" class="shortcut-supported" title="print filtered cards in range (Ctrl+P)">filtered <i class="fa fa-print"></i></button>
      <button id="printChanges" class="shortcut-supported" title="print changed cards (Ctrl+Alt+P) (Shift-Click to skip card backs)">changes <i class="fa fa-print"></i></button>
      <button id="saveJSON" class="shortcut-supported" title="save json (Ctrl+S)">json <i class="fa fa-floppy-o"></i></button>
      <button id="addButton" class="shortcut-supported" title="add new card (Ctrl+Plus)"><i class="fa fa-plus"></i></button>
      <button id="deleteButton" class="shortcut-supported" title="delete selected card (Ctrl+Delete)"><i class="fa fa-trash"></i></button>
      <input id="magic-style" type='checkbox' title="use old magic style" />
      <input id="skip-cardbacks" type='checkbox' title="skip cardbacks when printing" />
      <button id="menuButton" title="click to open additional options"><i class="fa fa-bars"></i></button>
    </div>
    <div id="content">
        <slot></slot>
    </div>
    <div id="stats"></div>
    <div id="footer">
      <ubg-cards-editor id="editor"></ubg-cards-editor>
    </div>
  </div>
</template>
